                ;***********************************************************
                ;
                ;       SUBROUTINE PARM
                ;
                ;       VERSION         3A
                ;       BILL SEILER
                ;       SEPT 6,1974
                ;
                ;       ADJUSTS THE PARAMETERS OF SPCWAR
                ;       R2=PTR AT RESET DATA
                ;
         000000         R0=%0
         000001         R1=%1
         000002         R2=%2
         000003         R3=%3
         000004         R4=%4
         000005         R5=%5
         000006         R6=%6
         000007         R7=%7
         000006         SP=R6
         000007         PC=R7
         000000         KSLOT=0
         000001         TSLOT=1
         000003         RSLOT=3
         000004         PSLOT=4
         000002         RESET=2
         000003         RESTRT=3
         000001         INIT=1
         000004         WAITR=4
         000011         READ=11
         000012         WRITE=12
         020000         EOF=20000
         000015         CR=15
         000012         LF=12
         177776         PSW=177776
                        .TITLE  PARM
                        .GLOBL  PARM,$ICI,SPCWAR,AMMO,WIN,TSPEED
                        .GLOBL  GRVFLG,ORBIT,CENTER,PTREP,RES01
         000000         .CSECT
  000000 000004 PARM:   IOT
  000002 000000         0
  000004    002         .BYTE   RESET,0         ;INITIALIZATION
  000005    000
  000006 142767'        BICB    #340,PSW        ;SET ALL INTERRUPTS ENABLED 
         000340
         177776
  000014 000004         IOT
  000016 000000'        SPCWAR
  000020    003         .BYTE   RESTRT,0        ;CTRL P WILL ERSTART AT SPCWAR
  000021    000
  000022 012767         MOV     #3,ANSWER+4     ;SET BUF COUNT ON ANSWER
         000003
         001154
  000030 000004         IOT
  000032 000476'        QUES1                   ;TYPE TITLE
  000034    012         .BYTE   WRITE,TSLOT     ;AND ASK IF CHANGE TO SPCWAR

                        PAGE    001

  000035    001
  000036 000004         IOT
  000040 001200'        ANSWER
  000042    011         .BYTE   READ,KSLOT      ;READ REPLY
  000043    000
  000044 000004 PARM01: IOT
  000046 000044'        PARM01
  000050    004         .BYTE   WAITR,KSLOT     ;WAIT FOR REPLY
  000051    000
  000052 122767         CMPB    #'Y,ANSWER+6    ;IS ANSWER YES?
         000131
         001126
  000060 001401         BEQ     PARM12          ;YES-THEN GO MAKE CHANGES
  000062 000207         RTS     PC              ;NO-GO START SPCWAR
  000064 005067'PARM12: CLR     GRVFLG          ;SET FOR NO GRAVITY
         000000
  000070 005067'        CLR     PTREP           ;SET FOR NO REAPPEAR TORPS
         000000
  000074 000004         IOT                     ;IS THERE TO BE GRAVITY
  000076 001042'        QUES5
  000100    012         .BYTE   WRITE,TSLOT
  000101    001
  000102 000004         IOT                     ;GET THE ANSWER
  000104 001200'        ANSWER
  000106    011         .BYTE   READ,KSLOT
  000107    000
  000110 000004 PARM14: IOT                     ;WAIT FOR THE ASNWER
  000112 000110'        PARM14
  000114    004         .BYTE   WAITR,KSLOT 
  000115    000
  000116 012700'        MOV     #CENTER,R0      ;GET RKT CENTER POSITION
         000000
  000122 010001         MOV     R0,R1           ;GET -CENTER
  000124 005401         NEG     R1
  000126 012703'        MOV     #ORBIT,R3       ;GET RKT ORBIT VELOCITY
         000000
  000132 010304         MOV     R3,R4           ;GET -ORBIT
  000134 005404         NEG     R4
  000136 012702'        MOV     #RES01,R2       ;SET UP RESET DATA PTR
         000000
  000142 122767         CMPB    #'Y,ANSWER+6    ;WAS ANSWER YES?
         000131
         001036
  000150 001014         BNE     PARM16          ;NO-THEN SKIP
  000152 012767'        MOV     #1,GRVFLG       ;YES-SET FLAG FOR GRAVITY
         000001
         000000
  000160 010022         MOV     R0,(R2)+        ;SET ESET DATA FROM GRAV START
  000162 005022         CLR     (R2)+
  000164 010122         MOV     R1,(R2)+
  000166 005022         CLR     (R2)+
  000170 005022         CLR     (R2)+
  000172 010322         MOV     R3,(R2)+
  000174 005022         CLR     (R2)+
  000176 010412         MOV     R4,(R2)
  000200 000410         BR      PARM17          ;SKIP TO NEXT QUESTION

                        PAGE    002

  000202 010022 PARM16: MOV     R0,(R2)+        ;SET UP RESET DATA FOR NOGRAV
  000204 010022         MOV     R0,(R2)+
  000206 010122         MOV     R1,(R2)+
  000210 010122         MOV     R1,(R2)+
  000212 005022         CLR     (R2)+
  000214 005022         CLR     (R2)+
  000216 005022         CLR     (R2)+
  000220 005012         CLR     (R2)
  000222 000004 PARM17: IOT                     ;ARE THE TORPS TO REAPPEAR?
  000224 001114'        QUES6
  000226    012         .BYTE   WRITE,TSLOT
  000227    001
  000230 000004         IOT                     ;GET THE ANSWER
  000232 001200'        ANSWER
  000234    011         .BYTE   READ,KSLOT
  000235    000
  000236 000004 PARM18: IOT                     ;WAIT FOR THE ANSWER
  000240 000236'        PARM18
  000242    004         .BYTE   WAITR,KSLOT
  000243    000
  000244 122767         CMPB    #'Y,ANSWER+6    ;WAS THE ASNWER YES?
         000131
         000734
  000252 001003         BNE     PARM02          ;NO-SO SKIP
  000254 012767'        MOV     #1,PTREP        ;YES-SET REAPPEARING TORP FLAG
         000001
         000000
  000262 000004 PARM02: IOT                     ;YES-THEN ASK # OF TORPEDOES
  000264 000624'        QUES2
  000266    012         .BYTE   WRITE,TSLOT 
  000267    001
  000270 012767         MOV     #10.,ANSWER+4   ;SET INITIAL BYTE COUNT
         000012
         000706
  000276 000004         IOT
  000300 001200'        ANSWER
  000302    011         .BYTE   READ,KSLOT      ;GET ANSWER
  000303    000
  000304 000004 PARM03: IOT
  000306 000304'        PARM03
  000310    004         .BYTE   WAITR,KSLOT     ;WAIT FOR THE ANSWER
  000311    000
  000312 012746'        MOV     #ANSWER+6,-(SP) ;PUSH FIELD START
         001206
  000316 016746         MOV     ANSWER+4,-(SP)  ;PUSH FILED LENGTH + CR&LF
         000662
  000322 162716         SUB     #2,(SP)         ;GET REAL LENGTH ON STK
         000002
  000326 004767'        JSR     PC,$ICI         ;CONVERT TO INTEGER
         000000
  000332 103002         BCC     PARM35          ;SKIP IF GOOD VALUE
  000334 005726         TST     (SP)+           ;POP BAD VALUE OFF STK
  000336 000751         BR      PARM02          ;ASK AGAIN
  000340 012667'PARM35: MOV     (SP)+,AMMO      ;SET UP AMMO
         000000
  000344 000004 PARM04: IOT

                        PAGE    003

  000346 000706'        QUES3                   ;ASK FOR NUMBER OF HITS
  000350    012         .BYTE   WRITE,TSLOT
  000351    001
  000352 000004         IOT
  000354 001200'        ANSWER
  000356    011         .BYTE   READ,KSLOT      ;GET ANSWER
  000357    000
  000360 000004 PARM05: IOT
  000362 000360'        PARM05
  000364    004         .BYTE   WAITR,KSLOT     ;WAIT FOR THE ANSWER
  000365    000
  000366 012746'        MOV     #ANSWER+6,-(SP) ;START
         001206
  000372 016746         MOV     ANSWER+4,-(SP)  ;LENGTH + CR&LF
         000606
  000376 162716         SUB     #2,(SP)         ;GET REAL LENGTH
         000002
  000402 004767'        JSR     PC,$ICI         ;CONVERT TO INTEGER
         000000
  000406 103002         BCC     PARM55          ;SKIP IF GOOD VALUE
  000410 005726         TST     (SP)+           ;POP BAD VALUE OFF STK
  000412 000754         BR      PARM04          ;ASK AGAIN
  000414 012667'PARM55: MOV     (SP)+,WIN       ;SET UP WIN
         000000
  000420 000004 PARM06: IOT
  000422 000766'        QUES4
  000424    012         .BYTE   WRITE,TSLOT     ;ASK FOR TORPEDO SPEED
  000425    001
  000426 000004         IOT
  000430 001200'        ANSWER
  000432    011         .BYTE   READ,KSLOT      ;GET ANSWER
  000433    000
  000434 000004 PARM07: IOT
  000436 000434'        PARM07
  000440    004         .BYTE   WAITR,KSLOT     ;WAIT FOR THE ANSWER
  000441    000
  000442 012746'        MOV     #ANSWER+6,-(SP) ;START FIELD
         001206
  000446 016746         MOV     ANSWER+4,-(SP)  ;LANGTH + CR&LF
         000532
  000452 162716         SUB     #2,(SP)         ;GET REAL LENGTH
         000002
  000456 004767'        JSR     PC,$ICI         ;CONVERT TO INTEGER
         000000
  000462 103002         BCC     PARM75          ;SKIP IF GOOD VALUE
  000464 005726         TST     (SP)+           ;POP BAD VALUE OFF STJ
  000466 000754         BR      PARM06          ;ASK AGAIN
  000470 012667'PARM75: MOV     (SP)+,TSPEED    ;SET TORPEDO SPEED
         000000
  000474 000207         RTS     PC              ;START SPCWAR!!!!!!!!!!!!!!!!!! 
  000476 000000 QUES1:  0
  000500 000000         0
  000502 000120 Q1BC:   Q1END-Q1BC-2
  000504    015         .BYTE   CR,LF
  000505    012
  000506    007         .ASCII  /SP        

                        PAGE    004

  000507    006
  000510    007
  000511    006
  000512    007
  000513    006
  000514    007
  000515    007
  000516    007
  000517    006
  000520    006
  000521    006
  000522    007
  000523    007
  000524    007
  000525    006
  000526    006
  000527    006
  000530    007
  000531    007
  000532    007
  000533    006
  000534    006
  000535    006
  000536    007
  000537    006
  000540    007
  000541    006
  000542    007
  000543    007
  000544    007
  000545    007
  000546    006
  000547    006
  000550    006
  000551    007
  000552    007
  000553    007
  000554    006
  000555    006
  000556    006
  000557    007
  000560    007
  000561    007
  000562    123
  000563    120
  000564    101
  000565    103
  000566    105
  000567    040
  000570    127
  000571    101
  000572    122
  000573    015         .BYTE   CR,LF
  000574    012
  000575    101         .ASCII  /ANY CHANGES? (YES-NO)/
  000576    116

                        PAGE    005

  000577    131
  000600    040
  000601    103
  000602    110
  000603    101
  000604    116
  000605    107
  000606    105
  000607    123
  000610    077
  000611    040
  000612    050
  000613    131
  000614    105
  000615    123
  000616    055
  000617    116
  000620    117
  000621    051
  000622    015         .BYTE   CR,LF
  000623    012
         000624 Q1END:  .EVEN
  000624 000000 QUES2:  0
  000626 000000         0
  000630 000054 Q2BC:   Q2END-Q2BC-2
  000632    111         .ASCII  /INPUT # OF TORPEDOS RKTS WILL HAVE. STD=64/
  000633    116
  000634    120
  000635    125
  000636    124
  000637    040
  000640    043
  000641    040
  000642    117
  000643    106
  000644    040
  000645    124
  000646    117
  000647    122
  000650    120
  000651    105
  000652    104
  000653    117
  000654    123
  000655    040
  000656    122
  000657    113
  000660    124
  000661    123
  000662    040
  000663    127
  000664    111
  000665    114
  000666    114
  000667    040
  000670    110

                        PAGE    006

  000671    101
  000672    126
  000673    105
  000674    056
  000675    040
  000676    123
  000677    124
  000700    104
  000701    075
  000702    066
  000703    064
  000704    015         .BYTE   CR,LF
  000705    012
         000706 Q2END:  .EVEN
  000706 000000 QUES3:  0
  000710 000000         0
  000712 000052 Q3BC:   Q3END-Q3BC-2
  000714    111         .ASCII  /INPUT # OF HITS TO DESTROY A RKT  STD=32/
  000715    116
  000716    120
  000717    125
  000720    124
  000721    040
  000722    043
  000723    040
  000724    117
  000725    106
  000726    040
  000727    110
  000730    111
  000731    124
  000732    123
  000733    040
  000734    124
  000735    117
  000736    040
  000737    104
  000740    105
  000741    123
  000742    124
  000743    122
  000744    117
  000745    131
  000746    040
  000747    101
  000750    040
  000751    122
  000752    113
  000753    124
  000754    040
  000755    040
  000756    123
  000757    124
  000760    104
  000761    075
  000762    063

                        PAGE    007

  000763    062
  000764    015         .BYTE   CR,LF
  000765    012
         000766 Q3END:  .EVEN
  000766 000000 QUES4:  0
  000770 000000         0
  000772 000045 Q4BC:   Q4END-Q4BC-2
  000774    111         .ASCII  /INPUT SPEED OF TORPEDOES. STD=16000/
  000775    116
  000776    120
  000777    125
  001000    124
  001001    040
  001002    123
  001003    120
  001004    105
  001005    105
  001006    104
  001007    040
  001010    117
  001011    106
  001012    040
  001013    124
  001014    117
  001015    122
  001016    120
  001017    105
  001020    104
  001021    117
  001022    105
  001023    123
  001024    056
  001025    040
  001026    123
  001027    124
  001030    104
  001031    075
  001032    061
  001033    066
  001034    060
  001035    060
  001036    060
  001037    015         .BYTE   CR,LF
  001040    012
         001042 Q4END:  .EVEN
  001042 000000 QUES5:  0
  001044 000000         0
  001046 000043 Q5BC:   Q5END-Q5BC-2
  001050    127         .ASCII  /WANT A SUN WITH GRAVITY? (YES-NO)/
  001051    101
  001052    116
  001053    124
  001054    040
  001055    101
  001056    040
  001057    123

                        PAGE    010

  001060    125
  001061    116
  001062    040
  001063    127
  001064    111
  001065    124
  001066    110
  001067    040
  001070    107
  001071    122
  001072    101
  001073    126
  001074    111
  001075    124
  001076    131
  001077    077
  001100    040
  001101    050
  001102    131
  001103    105
  001104    123
  001105    055
  001106    116
  001107    117
  001110    051
  001111    015         .BYTE   CR,LF
  001112    012
         001114 Q5END:  .EVEN
  001114 000000 QUES6:  0
  001116 000000         0
  001120 000055 Q6BC:   Q6END-Q6BC-2
  001122    127         .ASCII  /WANT REAPPEARING PHOTON TORPEDOES? (YES-NO)/
  001123    101
  001124    116
  001125    124
  001126    040
  001127    122
  001130    105
  001131    101
  001132    120
  001133    120
  001134    105
  001135    101
  001136    122
  001137    111
  001140    116
  001141    107
  001142    040
  001143    120
  001144    110
  001145    117
  001146    124
  001147    117
  001150    116
  001151    040
  001152    124

                        PAGE    011

  001153    117
  001154    122
  001155    120
  001156    105
  001157    104
  001160    117
  001161    105
  001162    123
  001163    077
  001164    040
  001165    050
  001166    131
  001167    105
  001170    123
  001171    055
  001172    116
  001173    117
  001174    051
  001175    015         .BYTE   CR,LF
  001176    012
         001200 Q6END:  .EVEN
  001200 000014 ANSWER: 12.                        ;BUFFER SIZE
  001202 000000         0                          ;FORMATTED ASCII
  001204 000000         0
         001222         .=.+12.
         001222         .EVEN
         000001         .END

                        PAGE    012

